<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../../static/css/boardList.css">
</head>
<body>

<div th:each="board : ${allBoardList}">
    <div class="wrapper">
        <div class="imgWrap">
            <img class="roomImg" th:src="@{'../static' + ${board.getRoomImage()}}" alt="img" id="roomImg"/>
        </div>
        <div th:text="${board.getId()}" hidden="hidden"></div>
        <div class="roomInfoWrap">
            <div class="priceWrap">
                <div class="price" th:if="${board.getRentType()} == 'MONTH'" th:text="'월세 ' + ${board.getDeposit()} + '/' + ${board.getMonth()}"></div>
                <div class="price" th:if="${board.getRentType()} == 'YEAR'" th:text="'전세 ' + ${board.getDeposit()}"></div>
                <div class="heartWrap" id="heartWrap">
                    <img src="../../static/images/하트.png" id="likeBtn" class="likeBtn"/>
                    <img src="../../static/images/좋아요.png" id="unlikeBtn" class="unlikeBtn"/>
                </div>
            </div>
            <div class="floorInfo">
                <div class="mr-7" th:text="${board.getFloorsNumber()} + '층'"></div>
                <div th:text="${board.roomArea} + '평'"></div>
            </div>
            <div class="addressInfo">
                <div th:text="${board.getAddress()}"></div>
            </div>
            <div class="roomContents" th:text="${board.getTitle()}"></div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {

        $(".unlikeBtn").hide(); // 빨간 하트 숨기기(기본은 흰 하트)

        $(".heartWrap").click(function () {
            var likeBtn = $(this).find(".likeBtn");
            var unlikeBtn = $(this).find(".unlikeBtn");

            if (unlikeBtn.is(":hidden")) {  // 흰 하트가 숨겨져 있다면
                $.ajax({
                    type: 'POST',
                    url: `member/like`,
                    dataType: 'json'
                })
                likeBtn.hide();
                unlikeBtn.show();
            } else {
                $.ajax({
                    type: 'DELETE',
                    url: 'member/like',
                    dataType: 'json'
                })
                likeBtn.show();
                unlikeBtn.hide();
            }
        });
    });

</script>
</body>
</html>